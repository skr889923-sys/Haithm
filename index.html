<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุญุงุถุฑ - ูุงุฌูุฉ ุงููุดุฑู</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
</head>
<body class="theme-light">
    <!-- Top Bar -->
    <header class="top-bar">
        <div class="school-info">
            <h1 id="schoolName">ูุฏุฑุณุฉ ุงููููุฐุฌูุฉ</h1>
            <span id="principalName">ุงูุฃุณุชุงุฐ ุฃุญูุฏ ูุญูุฏ</span>
        </div>
        <div class="status-indicators">
            <div class="connection-status" id="connectionStatus">
                <span class="status-dot online"></span>
                <span class="status-text">ูุชุตู</span>
            </div>
            <button class="theme-toggle" id="themeToggle" title="ุชุจุฏูู ุงูููุท">๐</button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Cards -->
        <section class="dashboard-cards">
            <div class="card counter-card present">
                <div class="counter-icon">โ</div>
                <div class="counter-info">
                    <div class="counter-value" id="presentCount">0</div>
                    <div class="counter-label">ุงูุญุงุถุฑูู</div>
                </div>
            </div>
            <div class="card counter-card absent">
                <div class="counter-icon">โ</div>
                <div class="counter-info">
                    <div class="counter-value" id="absentCount">0</div>
                    <div class="counter-label">ุงูุบุงุฆุจูู</div>
                </div>
            </div>
            <div class="card counter-card late">
                <div class="counter-icon">โฐ</div>
                <div class="counter-info">
                    <div class="counter-value" id="lateCount">0</div>
                    <div class="counter-label">ุงููุชุฃุฎุฑูู</div>
                </div>
            </div>
            <div class="card counter-card ratio">
                <div class="counter-icon">๐</div>
                <div class="counter-info">
                    <div class="counter-value" id="attendanceRatio">0%</div>
                    <div class="counter-label">ูุณุจุฉ ุงูุญุถูุฑ</div>
                </div>
            </div>
        </section>

        <!-- First/Last Student Info -->
        <section class="student-highlights">
            <div class="card highlight-card">
                <h3>ุฃูู ุญุงุถุฑ ุงูููู</h3>
                <div id="firstStudent" class="student-info">ูุง ููุฌุฏ</div>
            </div>
            <div class="card highlight-card">
                <h3>ุขุฎุฑ ุญุงุถุฑ ุงูููู</h3>
                <div id="lastStudent" class="student-info">ูุง ููุฌุฏ</div>
            </div>
        </section>

        <!-- Attendance Lists -->
        <section class="attendance-section">
            <div class="card attendance-card">
                <div class="card-header">
                    <div class="tabs" id="attendanceTabs">
                        <button class="tab active" data-tab="present">ุงูุญุงุถุฑูู</button>
                        <button class="tab" data-tab="late">ุงููุชุฃุฎุฑูู</button>
                        <button class="tab" data-tab="absent">ุงูุบุงุฆุจูู</button>
                    </div>
                    <div class="actions">
                        <input type="text" id="searchInput" placeholder="ุงูุจุญุซ..." class="search-input">
                        <button class="btn btn-secondary" id="printBtn">ุทุจุงุนุฉ</button>
                        <button class="btn btn-secondary" id="exportBtn">ุชุตุฏูุฑ CSV</button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="attendance-table" id="attendanceTable">
                        <thead>
                            <tr>
                                <th>ุงูุฑูู</th>
                                <th>ุงูุงุณู</th>
                                <th>ุงูุตู</th>
                                <th>ุงูููุช</th>
                                <th>ุงูุญุงูุฉ</th>
                                <th>ุฏูุงุฆู ุงูุชุฃุฎุฑ</th>
                            </tr>
                        </thead>
                        <tbody id="attendanceTableBody">
                            <!-- Data will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <!-- Navigation Buttons -->
    <div class="nav-buttons">
        <a href="student.html" class="btn btn-primary">๐ ูุงุฌูุฉ ุงูุทูุงุจ</a>
        <a href="admin.html" class="btn btn-secondary">โ๏ธ ููุญุฉ ุงูุฅุฏุงุฑุฉ</a>
    </div>

    <!-- Scripts -->
    <script src="assets/js/db.js"></script>
    <script src="assets/js/ui.js"></script>
    <script src="assets/js/admin_simple.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('/service-worker.js');
                    console.log('SW registered: ', registration);
                } catch (registrationError) {
                    console.log('SW registration failed: ', registrationError);
                }
            });
        }
    </script>
</body>
</html>